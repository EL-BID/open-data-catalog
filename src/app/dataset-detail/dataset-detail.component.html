<section class="odl-headline-section">
  <div class="odl-container">
    <div *ngIf="dataset">
      <div class="dataset-header">
        <h1 class="odl-main-blue-color dataset-detail-title">{{ dataset?.title }}</h1>
        <span>By <strong>{{ dataset.unitResponsible }}</strong></span>
      </div>
      <div class="dataset-categories">
        <span class="category-box" *ngFor="let theme of dataset.theme">{{ theme }}</span>
      </div>
      <p>{{ dataset?.description }}</p>
      <div class="dataset-download">
        <button (click)="downloadDataset()" class="btn-catalog btn-catalog-dataset">Download Dataset <span
            class="download-icon" aria-hidden="true"><fa-icon [icon]="faDownload"></fa-icon></span></button>
      </div>
    </div>
  </div>
</section>
<hr>
<section class="odl-section">
  <div class="odl-container">
    <h2 class="h2-metadata">Dataset Metadata</h2>
    <div class="metadata-category">
      <div class="metadata-category-title">
        <span class="metadata-icon" aria-hidden="true"><fa-icon [icon]="faEarthAmerica"></fa-icon></span>
        <h3>Coverage</h3>
      </div>
      <ul>
        <li>
          <div>✓ Temporal:</div>
          <div>{{ dataset?.temporal }}</div>
        </li>
        <li>
          <div>✓ Geographical:</div>
          <div>{{ sortCountries(dataset?.spatial) }}</div>
        </li>
      </ul>
    </div>

    <div class="metadata-category">
      <div class="metadata-category-title">
        <span class="metadata-icon" aria-hidden="true"><fa-icon [icon]="faCircleInfo"></fa-icon></span>
        <h3>Basic Details</h3>
      </div>
      <ul>
        <li>
          <div>✓ Keyword(s):</div>
          <div>
            {{ getSortedKeywords().join(', ') }}
          </div>
        </li>
        <li>
          <div>✓ Published:</div>
          <div>{{ dataset?.issued }}</div>
        </li>
      </ul>
    </div>

    <div class="metadata-category">
      <div class="metadata-category-title">
        <span class="metadata-icon" aria-hidden="true"><fa-icon [icon]="faDatabase"></fa-icon></span>
        <h3>Structure and Type</h3>
      </div>
      <ul>
        <li>
          <div>✓ Structure:</div>
          <div>{{ dataset?.dataStructure }}</div>
        </li>
        <li>
          <div>✓ Statistical Type:</div>
          <div>{{ dataset?.statisticalType }}</div>
        </li>
        <li>
          <div>✓ Dataset Type:</div>
          <div>{{ dataset?.type }}</div>
        </li>
      </ul>
    </div>

    <div class="metadata-category">
      <div class="metadata-category-title">
        <span class="metadata-icon" aria-hidden="true"><fa-icon [icon]="faUserShield"></fa-icon></span>
        <h3>Rights and Authorship</h3>
      </div>
      <ul>
        <li>
          <div>✓ Publisher:</div>
          <div>{{ dataset?.publisher }}</div>
        </li>
        <li>
          <div>✓ License:</div>
          <div>
            <a *ngIf="dataset?.license" [href]="getLicense()" target="_blank" rel="noopener noreferrer" class="metadata-link">
              {{ getLicense() }}
            </a>
          </div>
        </li>
        <li>
          <div>✓ Author(s): </div>
          <div>{{ getAuthors() }}</div>
        </li>
      </ul>
    </div>
  </div>
</section>
<hr>

<section *ngIf="dataset?.source" class="odl-section">
  <div class="odl-container">
    <h2 class="h2-metadata">Related IDB Publication</h2>
    <div class="metadata-category">
      <div class="metadata-category-title">
        <span class="metadata-icon" aria-hidden="true"><fa-icon [icon]="faLink"></fa-icon></span>
        <h3>Source</h3>
      </div>
      <ul>
        <li>
          <div>✓ Publication DOI:</div>
          <div>
            <a [href]="dataset.source" target="_blank" rel="noopener noreferrer" class="metadata-link">
              {{ dataset.source }}
            </a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>


<!-- <div *ngIf="loading">Cargando dataset...</div>

<table *ngIf="!loading && datasetContent.length > 0">
  <thead>
    <tr>
      Iteramos sobre las claves del primer objeto de datasetContent
      <th *ngFor="let key of objectKeys(datasetContent[0])">{{ key }}</th>
    </tr>
  </thead>
  <tbody>
    Iteramos sobre las filas del dataset
    <tr *ngFor="let row of paginatedDataset">
      <td *ngFor="let key of objectKeys(row)">{{ row[key] }}</td>
    </tr>
  </tbody>
</table>

 Mensaje cuando no haya datos disponibles
<div *ngIf="!loading && datasetContent.length === 0">
  No se encontraron datos para mostrar.
</div> -->
